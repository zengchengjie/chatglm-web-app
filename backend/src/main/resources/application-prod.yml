server:
  port: 8000
  servlet:
    context-path: /api

spring:
  application:
    name: chatglm-backend
  main:
    web-application-type: servlet
  profiles:
    active: prod

  # RabbitMQ配置
  rabbitmq:
    host: rabbitmq
    port: 5672
    username: ${RABBITMQ_USER:admin}
    password: ${RABBITMQ_PASSWORD:admin123}
    virtual-host: /
    connection-timeout: 10000
    template:
      retry:
        enabled: true
        max-attempts: 3
        initial-interval: 1000
        multiplier: 2.0
        max-interval: 10000

  # Redis配置
  redis:
    host: redis
    port: 6379
    password: ${REDIS_PASSWORD:}
    database: 0
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1ms
      shutdown-timeout: 100ms

# ChatGLM API配置
chatglm:
  api:
    base-url: https://open.bigmodel.cn/api/paas/v4/chat/completions
    api-key: ${CHATGLM_API_KEY:7dbe906c5aec46e1a79dd28e551b6163.eKQbqtTz7PvRFubR}
    model-name: chatglm_turbo
    timeout: 30000
    max-tokens: 2000
    temperature: 0.7
    top-p: 0.95
  monitoring:
    enabled: true
    metrics:
      prefix: chatglm
    tracing:
      enabled: false
    logging:
      level: INFO

# 日志配置
logging:
  level:
    root: INFO
    com.chatglm.webapp: INFO
  file:
    name: logs/chatglm-backend.log

# JWT配置
jwt:
  secret: ${JWT_SECRET:chatglm-secret-key-2024-enterprise-edition}
  expiration: 86400

# Actuator监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    export:
      prometheus:
        enabled: true
