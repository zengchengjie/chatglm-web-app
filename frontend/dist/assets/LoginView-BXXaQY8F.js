import{r as e,a,c as s,b as l,d as r,w as o,e as n,f as u,u as t,o as i,g as d,h as p,t as m,i as c,E as g}from"./index-Dqqgi44q.js";import{_ as f,u as v}from"./_plugin-vue_export-helper-BiLrfL6K.js";const w={class:"login-container"},_={class:"login-card"},h=f({__name:"LoginView",setup(f){const h=t();v();const b=e(),y=e(!1),V=a({username:"admin",password:"admin123"}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},x=async()=>{b.value&&await b.value.validate(async e=>{if(e)try{y.value=!0;const e=await c.auth.login({username:V.username,password:V.password});localStorage.setItem("chatglm_token",e.token),g.success("登录成功"),h.push("/")}catch(a){console.error("Login error:",a),g.error(a.message||"登录失败")}finally{y.value=!1}})};return(e,a)=>{const t=u("el-input"),c=u("el-form-item"),g=u("el-button"),f=u("el-form");return i(),s("div",w,[l("div",_,[a[2]||(a[2]=l("div",{class:"login-header"},[l("h1",null,"ChatGLM AI助手"),l("p",null,"请登录以继续使用")],-1)),r(f,{ref_key:"loginFormRef",ref:b,model:V,rules:k,class:"login-form",onSubmit:n(x,["prevent"])},{default:o(()=>[r(c,{prop:"username"},{default:o(()=>[r(t,{modelValue:V.username,"onUpdate:modelValue":a[0]||(a[0]=e=>V.username=e),placeholder:"用户名","prefix-icon":"User",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),r(c,{prop:"password"},{default:o(()=>[r(t,{modelValue:V.password,"onUpdate:modelValue":a[1]||(a[1]=e=>V.password=e),type:"password",placeholder:"密码","prefix-icon":"Lock",size:"large","show-password":"",onKeyup:d(x,["enter"])},null,8,["modelValue"])]),_:1}),r(c,null,{default:o(()=>[r(g,{type:"primary",size:"large",class:"login-button",loading:y.value,onClick:x,block:""},{default:o(()=>[p(m(y.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a[3]||(a[3]=l("div",{class:"login-footer"},[l("p",null,"默认账号: admin / admin123"),l("p",null,"或者: user / user123")],-1))])])}}},[["__scopeId","data-v-516fb8c3"]]);export{h as default};
