<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本渲染测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 8px;
            word-wrap: break-word;
            white-space: pre-wrap;
            line-height: 1.5;
            background-color: #f5f5f5;
            margin: 10px 0;
        }
        .label { font-weight: bold; color: #333; }
        .expected { color: green; }
        .actual { color: blue; }
    </style>
</head>
<body>
    <h1>文本渲染效果测试</h1>
    
    <div class="test-case">
        <div class="label">英文文本 (期望空格正常显示):</div>
        <div class="expected">期望效果: "Hello world, how are you?"</div>
        <div class="message-content">Hello&nbsp;world,&nbsp;how&nbsp;are&nbsp;you?</div>
        <div class="actual">实际效果 (使用v-html):</div>
        <div class="message-content" id="english-test"></div>
    </div>
    
    <div class="test-case">
        <div class="label">中文文本 (期望正常显示):</div>
        <div class="expected">期望效果: "你好世界，这是一个测试"</div>
        <div class="message-content">你好世界，这是一个测试</div>
        <div class="actual">实际效果 (使用{{ }}):</div>
        <div class="message-content" id="chinese-test"></div>
    </div>
    
    <div class="test-case">
        <div class="label">GLM典型英文回复:</div>
        <div class="message-content" id="glm-english"></div>
    </div>
    
    <div class="test-case">
        <div class="label">对比测试 (CSS方式 vs HTML方式):</div>
        <div class="expected">CSS white-space 方式:</div>
        <div class="message-content" style="white-space: pre-wrap;">The quick brown fox jumps over the lazy dog.</div>
        <div class="expected">HTML &nbsp; 方式:</div>
        <div class="message-content" id="comparison-html"></div>
    </div>

    <script>
        // 测试数据
        const englishText = "Hello world, how are you?";
        const chineseText = "你好世界，这是一个测试";
        const glmEnglish = "I understand your question. Based on my knowledge, the answer is: artificial intelligence is a rapidly growing field.";
        const comparisonText = "The quick brown fox jumps over the lazy dog.";
        
        // 格式化函数
        function formatMessage(content) {
            return content
                .replace(/ /g, '&nbsp;')
                .replace(/\n/g, '<br>');
        }
        
        // 渲染测试
        document.getElementById('english-test').innerHTML = formatMessage(englishText);
        document.getElementById('chinese-test').textContent = chineseText;
        document.getElementById('glm-english').innerHTML = formatMessage(glmEnglish);
        document.getElementById('comparison-html').innerHTML = formatMessage(comparisonText);
        
        console.log('HTML渲染测试完成');
        console.log('英文原文:', englishText);
        console.log('格式化后:', formatMessage(englishText));
        console.log('中文原文:', chineseText);
        console.log('英文GLM回复原文:', glmEnglish);
        console.log('英文GLM格式化后:', formatMessage(glmEnglish));
    </script>
</body>
</html>